{
    "commands": {
        "egor_open_pmi_panel": {
            "iconId": "cmdAddDefect",
            "title": "Open PMI"
        },
        "egor_load_jt_file":{
            "iconId": "cmdAddDefect",
            "title": "Load"
        }
    },
    "commandHandlers": {
        "egor_open_pmi_panelHandler": {
            "id": "egor_open_pmi_panel",
            "activeWhen": {
                "condition": "conditions.true"
            },
            "visibleWhen": {
                "condition": "conditions.true"
            },
            "action": "activateegor_open_pmi_panel"
        },
        "egor_load_jt_fileHandler":{
            "id": "egor_load_jt_file",
            "activeWhen": true,
            "visibleWhen": {
                "condition":"conditions.canLoadJT"
            },
            "action": "activateegor_load_jt_file"
        }
    },
    "commandPlacements": {
        "egor_open_pmi_panelPlacement": {
            "id": "egor_open_pmi_panel",
            "priority": 10,
            "uiAnchor": "aw_workarea_toolbar"
        },
        "egor_load_jt_filePlacement":{
            "id": "egor_load_jt_file",
            "priority": 10,
            "uiAnchor": "egor_jt_anchor"
        }
    },
    "actions": {
        "activateegor_open_pmi_panel": {
            "actionType": "dialog",
            "inputData": {
                "options": {
                    "view": "EgorPmiPanelMain",
                    "parent": ".aw-layout-workareaMain",
                    "placement": "right",
                    "width": "MEDIUM",
                    "height": "FULL"
                }
            }
        },
        "activateegor_load_jt_file":{
            "actionType": "JSFunctionAsync",
            "method": "loadJTWithPMIs",
            "inputData": {
                "selectionData":"{{commandContext.vmo}}"
            },
            "deps": "js/egorPmiPanelService"
        },
        "events": {
                "success": [ {
                    "name":"egorPmiPanelJTListRefresh"
                },
                {
                    "name":"configurationUpdated_indicators"
                }
                ]
        }
    },
    "conditions":{
        "canLoadJT":{
            "expression":"ctx.egorPmiCtx.loadedJTs.indexOf(commandContext.vmo.uid) === -1"
        }
    }
}